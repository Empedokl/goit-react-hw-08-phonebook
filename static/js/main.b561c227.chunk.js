(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{115:function(e,t,n){},122:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(30),o=n.n(r),s=n(20),i=n(4),u=n(72),l=n(51),b=n(5),j=n(29),d=n(73),f=n.n(d),h=n(14),p=n.n(h),O=n(28),x=n(18),m=n.n(x),v={fetchContactRequest:Object(b.b)("contact/fetchContactRequest"),fetchContactSuccess:Object(b.b)("contact/fetchContactSuccess"),fetchContactError:Object(b.b)("contact/fetchContactError"),addContactRequest:Object(b.b)("contact/addContactRequest"),addContactSuccess:Object(b.b)("contact/addContactSuccess"),addContactError:Object(b.b)("contact/addContactError"),deleteContactRequest:Object(b.b)("contact/deleteContactRequest"),deleteContactSuccess:Object(b.b)("contact/deleteContactSuccess"),deleteContactError:Object(b.b)("contact/deleteContactError"),changeFilter:Object(b.b)("contact/changeFilter")};m.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com/";var g,C,_={addContact:function(e,t){return function(){var n=Object(O.a)(p.a.mark((function n(c){var a,r;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a={name:e,number:t},c(v.addContactRequest()),n.prev=2,n.next=5,m.a.post("/contacts",a);case 5:r=n.sent,c(v.addContactSuccess(r.data)),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),c(v.addContactError(n.t0));case 12:case"end":return n.stop()}}),n,null,[[2,9]])})));return function(e){return n.apply(this,arguments)}}()},deleteContact:function(e){return function(){var t=Object(O.a)(p.a.mark((function t(n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(v.deleteContactRequest()),t.prev=1,t.next=4,m.a.delete("/contacts/".concat(e));case 4:n(v.deleteContactSuccess(e)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),n(v.deleteContactError(t.t0));case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()},fetchContacts:function(){return function(){var e=Object(O.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(v.fetchContactRequest()),e.prev=1,e.next=4,m.a.get("/contacts");case 4:n=e.sent,t(v.fetchContactSuccess(n.data)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(v.fetchContactError(e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()}},k=n(46),w=function(e){return e.contacts.items},y=function(e){return e.contacts.filter},N={getContacts:w,getFilter:y,visibleContacts:Object(k.a)([w,y],(function(e,t){return e.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}))}))},L=n(7),S=n(12),R=Object(b.d)([],(g={},Object(L.a)(g,v.fetchContactSuccess,(function(e,t){return t.payload})),Object(L.a)(g,v.addContactSuccess,(function(e,t){var n=t.payload;return[].concat(Object(l.a)(e),[n])})),Object(L.a)(g,v.deleteContactSuccess,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))})),g)),q=Object(b.d)(!1,(C={},Object(L.a)(C,v.fetchContactRequest,(function(){return!0})),Object(L.a)(C,v.fetchContactSuccess,(function(){return!1})),Object(L.a)(C,v.fetchContactError,(function(){return!1})),Object(L.a)(C,v.addContactRequest,(function(){return!0})),Object(L.a)(C,v.addContactSuccess,(function(){return!1})),Object(L.a)(C,v.addContactError,(function(){return!1})),Object(L.a)(C,v.deleteContactRequest,(function(){return!0})),Object(L.a)(C,v.deleteContactSuccess,(function(){return!1})),Object(L.a)(C,v.deleteContactError,(function(){return!1})),C)),I=Object(b.d)("",Object(L.a)({},v.changeFilter,(function(e,t){return t.payload}))),E=Object(S.c)({items:R,filter:I,isLoading:q});m.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com/";var V,U=function(e){m.a.defaults.headers.common.Authorization="Bearer ".concat(e)},F=function(){m.a.defaults.headers.common.Authorization=""},z=Object(b.c)("auth/register",function(){var e=Object(O.a)(p.a.mark((function e(t,n){var c,a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.rejectWithValue,e.prev=1,e.next=4,m.a.post("/users/signup",t);case 4:return a=e.sent,r=a.data,U(r.token),e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",c(e.t0));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),A=Object(b.c)("auth/login",function(){var e=Object(O.a)(p.a.mark((function e(t,n){var c,a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.rejectWithValue,e.prev=1,e.next=4,m.a.post("/users/login",t);case 4:return a=e.sent,r=a.data,U(r.token),e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",c(e.t0));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),B={register:z,logOut:Object(b.c)("auth/logout",function(){var e=Object(O.a)(p.a.mark((function e(t,n){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.rejectWithValue,e.prev=1,e.next=4,m.a.post("/users/logout");case 4:F(),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",c(e.t0));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()),logIn:A,fetchCurrentUser:Object(b.c)("auth/refresh",function(){var e=Object(O.a)(p.a.mark((function e(t,n){var c,a,r,o,s,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=n.rejectWithValue,a=n.getState,r=a(),null!==(o=r.auth.token)){e.next=5;break}return e.abrupt("return",c());case 5:return U(o),e.prev=6,e.next=9,m.a.get("/users/current");case 9:return s=e.sent,i=s.data,e.abrupt("return",i);case 14:return e.prev=14,e.t0=e.catch(6),e.abrupt("return",c(e.t0));case 17:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t,n){return e.apply(this,arguments)}}())},T={getIsLoggedIn:function(e){return e.auth.isLoggedIn},getUsername:function(e){return e.auth.user.name},getUserEmail:function(e){return e.auth.user.email}},D=Object(b.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1},extraReducers:(V={},Object(L.a)(V,B.register.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(L.a)(V,B.logIn.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(L.a)(V,B.logOut.fulfilled,(function(e,t){e.user={name:null,email:null},e.token=null,e.isLoggedIn=!1})),Object(L.a)(V,B.fetchCurrentUser.fulfilled,(function(e,t){e.user=t.payload,e.isLoggedIn=!0})),V)}).reducer,M=Object(l.a)(Object(b.f)({serializableCheck:{ignoredActions:[j.a,j.f,j.b,j.c,j.d,j.e]}})),W={key:"auth",storage:f.a,whitelist:["token"]},G=Object(b.a)({reducer:{auth:Object(j.g)(W,D),contacts:E},middleware:M,devTools:!1}),H=Object(j.h)(G),J=(n(115),n(6)),K=n(74),P=n.n(K),Q=n(1);function X(e){var t=e.children;return Object(Q.jsx)("div",{className:P.a.container,children:t})}var Y=n(56),Z=n.n(Y),$=function(){return Object(Q.jsx)("div",{className:Z.a.container,children:Object(Q.jsx)("h1",{className:Z.a.title,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u0430\u044f \u043a\u043d\u0438\u0433\u0430"})})},ee=n(25),te=n(38),ne=n.n(te),ce=n(143);function ae(){var e=Object(i.b)(),t=Object(c.useState)(""),n=Object(ee.a)(t,2),a=n[0],r=n[1],o=Object(c.useState)(""),s=Object(ee.a)(o,2),u=s[0],l=s[1],b=function(e){var t=e.target,n=t.name,c=t.value;switch(n){case"email":return r(c);case"password":return l(c);default:return}};return Object(Q.jsxs)("div",{children:[Object(Q.jsx)("h1",{className:ne.a.title,children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043b\u043e\u0433\u0438\u043d\u0430"}),Object(Q.jsx)(ce.a,{children:Object(Q.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(B.logIn({email:a,password:u})),r(""),l("")},className:ne.a.form,autoComplete:"off",children:[Object(Q.jsxs)("label",{className:ne.a.label,children:["\u041f\u043e\u0447\u0442\u0430",Object(Q.jsx)("input",{type:"email",name:"email",value:a,onChange:b,required:!0})]}),Object(Q.jsxs)("label",{className:ne.a.label,children:["\u041f\u0430\u0440\u043e\u043b\u044c",Object(Q.jsx)("input",{type:"password",name:"password",value:u,onChange:b,required:!0})]}),Object(Q.jsx)("button",{className:ne.a.button,type:"submit",children:"\u0412\u043e\u0439\u0442\u0438"})]})})]})}var re=n(34),oe=n.n(re);function se(){var e=Object(i.b)(),t=Object(c.useState)(""),n=Object(ee.a)(t,2),a=n[0],r=n[1],o=Object(c.useState)(""),s=Object(ee.a)(o,2),u=s[0],l=s[1],b=Object(c.useState)(""),j=Object(ee.a)(b,2),d=j[0],f=j[1],h=function(e){var t=e.target,n=t.name,c=t.value;switch(n){case"name":return r(c);case"email":return l(c);case"password":return f(c);default:return}};return Object(Q.jsxs)("div",{children:[Object(Q.jsx)("h1",{className:oe.a.title,children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"}),Object(Q.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(B.register({name:a,email:u,password:d})),r(""),l(""),f("")},className:oe.a.form,autoComplete:"off",children:[Object(Q.jsxs)("label",{className:oe.a.label,children:["\u0418\u043c\u044f",Object(Q.jsx)("input",{type:"text",name:"name",value:a,onChange:h,required:!0})]}),Object(Q.jsxs)("label",{className:oe.a.label,children:["\u041f\u043e\u0447\u0442\u0430",Object(Q.jsx)("input",{type:"email",name:"email",value:u,onChange:h,required:!0})]}),Object(Q.jsxs)("label",{className:oe.a.label,children:["\u041f\u0430\u0440\u043e\u043b\u044c",Object(Q.jsx)("input",{type:"password",name:"password",value:d,onChange:h,required:!0})]}),Object(Q.jsx)("button",{className:oe.a.button,type:"submit",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})]})}var ie,ue,le,be,je=n(23),de=n(24),fe=de.a.form(ie||(ie=Object(je.a)(["\n  margin: 0 auto;\n"]))),he=de.a.label(ue||(ue=Object(je.a)(["\n  display: block;\n  font-size: 20px;\n  margin-bottom: 10px;\n"]))),pe=de.a.input(le||(le=Object(je.a)(["\n  display: block;\n  width: 200px;\n  font-size: 13px;\n  padding: 6px 0 4px 10px;\n  border: 1px solid #ccc;\n  background: #f6f6f6;\n  border-radius: 8px;\n\n  &:focus {\n    outline: none;\n  }\n"]))),Oe=de.a.button(be||(be=Object(je.a)(["\n  width: 90px;\n  height: 28px;\n  border: 1px solid #ccc;\n  background: #fff;\n  color: #666;\n  border-radius: 5px;\n  box-shadow: inset 0 2px 2px #ccc;\n  background-color: lightgreen;\n  cursor: pointer;\n\n  &:hover {\n    box-shadow: 0 0 2px #ccc;\n  }\n\n  &:active {\n    margin-top: 1px;\n    margin-bottom: -1px;\n    zoom: 1;\n  }\n"])));var xe,me=function(){var e=Object(c.useState)(""),t=Object(ee.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),o=Object(ee.a)(r,2),s=o[0],u=o[1],l=Object(i.c)(N.getContacts),b=Object(i.b)(),j=function(e){var t=e.target,n=t.name,c=t.value;switch(n){case"name":a(c);break;case"number":u(c);break;default:return}};return Object(Q.jsxs)(fe,{onSubmit:function(e){e.preventDefault(),(null===l||void 0===l?void 0:l.some((function(e){return e.name===n})))?alert("".concat(n," is already in contacts!")):(b(_.addContact(n,s)),a(""),u(""))},children:[Object(Q.jsxs)(he,{children:["Name",Object(Q.jsx)(pe,{type:"text",value:n,name:"name",onChange:j,placeholder:"Name*",required:!0})]}),Object(Q.jsxs)(he,{children:["Number",Object(Q.jsx)(pe,{type:"number",value:s,name:"number",onChange:j,placeholder:"111-11-11*",required:!0})]}),Object(Q.jsx)(Oe,{type:"submit",children:"Add contact"})]})},ve=de.a.label(xe||(xe=Object(je.a)(["\n  font-size: 18px;\n  display: flex;\n  flex-direction: column;\n"])));var ge,Ce,_e=function(){var e=Object(i.c)(N.getFilter),t=Object(i.b)();return Object(Q.jsxs)(ve,{children:["Find contacts by name",Object(Q.jsx)("input",{type:"text",value:e,onChange:function(e){return t(v.changeFilter(e.target.value))}})]})},ke=de.a.ul(ge||(ge=Object(je.a)(["\n  padding: 0;\n"]))),we=de.a.li(Ce||(Ce=Object(je.a)(["\n  display: flex;\n  justify-content: space-between;\n\n  &:not(:last-child) {\n    margin-bottom: 5px;\n  }\n"])));var ye=function(){var e=Object(i.c)(N.visibleContacts),t=Object(i.b)();return Object(Q.jsx)(ke,{children:e.map((function(e){var n=e.id,c=e.name,a=e.number;return Object(Q.jsxs)(we,{children:[Object(Q.jsxs)("span",{children:[c,":"]}),Object(Q.jsx)("span",{children:a}),Object(Q.jsx)("button",{type:"button",onClick:function(){return t(_.deleteContact(n))},children:"Delete"})]},n)}))})},Ne=n(53),Le=n.n(Ne);function Se(e){var t=Object(i.c)(N.getContacts),n=Object(i.b)();return Object(c.useEffect)((function(){n(_.fetchContacts())}),[n]),Object(Q.jsxs)("section",{className:Le.a.section,children:[Object(Q.jsxs)("div",{className:Le.a.wrap,children:[Object(Q.jsx)("h1",{children:"Phonebook"}),Object(Q.jsx)(me,{})]}),Object(Q.jsxs)("div",{className:Le.a.wrap,children:[Object(Q.jsx)("h2",{children:"Contacts"}),(null===t||void 0===t?void 0:t.length)>0&&Object(Q.jsx)(_e,{}),(null===t||void 0===t?void 0:t.length)>0&&Object(Q.jsx)(ye,{})]})]})}var Re=n(44),qe=n.n(Re),Ie=function(){var e=Object(i.c)(T.getIsLoggedIn);return Object(Q.jsxs)("nav",{children:[Object(Q.jsx)(s.b,{to:"/",exact:!0,className:qe.a.link,activeClassName:qe.a.activeLink,children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),e&&Object(Q.jsx)(s.b,{to:"/contacts",exact:!0,className:qe.a.link,activeClassName:qe.a.activeLink,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0438"})]})},Ee=n(45),Ve=n.n(Ee);function Ue(){return Object(Q.jsxs)("div",{children:[Object(Q.jsx)(s.b,{to:"/register",exact:!0,className:Ve.a.link,activeClassName:Ve.a.activeLink,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(Q.jsx)(s.b,{to:"/login",exact:!0,className:Ve.a.link,activeClassName:Ve.a.activeLink,children:"\u041b\u043e\u0433\u0438\u043d"})]})}var Fe=n(59),ze=n.n(Fe),Ae=n(82),Be=n.n(Ae),Te=n(147);function De(){var e=Object(i.b)(),t=Object(i.c)(T.getUserEmail);return Object(Q.jsxs)("div",{className:ze.a.container,children:[Object(Q.jsx)(Te.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",color:"inherit",children:Object(Q.jsx)(Be.a,{})}),Object(Q.jsx)("span",{className:ze.a.name,children:t}),Object(Q.jsx)("button",{type:"button",onClick:function(){return e(B.logOut())},children:"\u0412\u044b\u0439\u0442\u0438"})]})}var Me=n(145),We=n(148),Ge=n(146),He=n(83),Je=n.n(He),Ke=Object(Me.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function Pe(){var e=Object(i.c)(T.getIsLoggedIn),t=Ke();return Object(Q.jsx)("div",{className:t.root,children:Object(Q.jsx)(We.a,{position:"static",children:Object(Q.jsxs)(Ge.a,{className:Je.a.header,children:[Object(Q.jsx)(Ie,{}),e?Object(Q.jsx)(De,{}):Object(Q.jsx)(Ue,{})]})})})}var Qe=n(37),Xe=n(52);function Ye(e){var t=e.children,n=Object(Xe.a)(e,["children"]),c=Object(i.c)(T.getIsLoggedIn);return Object(Q.jsx)(J.b,Object(Qe.a)(Object(Qe.a)({},n),{},{children:c?t:Object(Q.jsx)(J.a,{to:"/login"})}))}function Ze(e){var t=e.children,n=e.redirectTo,c=void 0===n?"/":n,a=e.restricted,r=void 0!==a&&a,o=Object(Xe.a)(e,["children","redirectTo","restricted"]),s=Object(i.c)(T.getIsLoggedIn)&&r;return Object(Q.jsx)(J.b,Object(Qe.a)(Object(Qe.a)({},o),{},{children:s?Object(Q.jsx)(J.a,{to:c}):t}))}function $e(){var e=Object(i.b)();return Object(c.useEffect)((function(){e(B.fetchCurrentUser())}),[e]),Object(Q.jsxs)(X,{children:[Object(Q.jsx)(Pe,{}),Object(Q.jsxs)(J.d,{children:[Object(Q.jsx)(Ze,{exact:!0,path:"/",children:Object(Q.jsx)($,{})}),Object(Q.jsx)(Ze,{path:"/register",restricted:!0,children:Object(Q.jsx)(se,{})}),Object(Q.jsx)(Ze,{path:"/login",restricted:!0,redirectTo:"/contacts",children:Object(Q.jsx)(ae,{})}),Object(Q.jsx)(Ye,{path:"/contacts",children:Object(Q.jsx)(Se,{})})]})]})}o.a.render(Object(Q.jsx)(a.a.StrictMode,{children:Object(Q.jsx)(i.a,{store:G,children:Object(Q.jsx)(u.a,{loading:null,persistor:H,children:Object(Q.jsx)(s.a,{children:Object(Q.jsx)($e,{})})})})}),document.getElementById("root"))},34:function(e,t,n){e.exports={form:"RegisterView_form__3PLP2",label:"RegisterView_label__1K-nU",title:"RegisterView_title__kGWgu",button:"RegisterView_button__3l_Ba"}},38:function(e,t,n){e.exports={title:"LoginView_title__2Onfq",form:"LoginView_form__TOuDw",label:"LoginView_label__1Ln46",button:"LoginView_button__1lXZ8"}},44:function(e,t,n){e.exports={link:"Navigation_link__1drM8",activeLink:"Navigation_activeLink__3BK5b"}},45:function(e,t,n){e.exports={link:"AuthNav_link__h2wYc",activeLink:"AuthNav_activeLink__JHQnj"}},53:function(e,t,n){e.exports={section:"ContactsView_section__tfKpl",wrap:"ContactsView_wrap__1-sNl"}},56:function(e,t,n){e.exports={container:"HomeView_container__1F3-3",title:"HomeView_title__2hLyf"}},59:function(e,t,n){e.exports={container:"UserMenu_container__1Nwlh",avatar:"UserMenu_avatar__2sgUR",name:"UserMenu_name__1rokv"}},74:function(e,t,n){e.exports={container:"Container_container__2nT9n"}},83:function(e,t,n){e.exports={header:"AppBar_header__3u47E"}}},[[122,1,2]]]);
//# sourceMappingURL=main.b561c227.chunk.js.map